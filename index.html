<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ram's Milk Delivery Tracker</title>
    <link rel="stylesheet" href="/tr/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-wine-bottle"></i>
            </div>
            <h2>Milk Tracker</h2>
            <p>For Ram</p>
        </div>
        
        <div class="nav-links">
            <a href="#" class="nav-link active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-link" data-page="calendar">
                <i class="fas fa-calendar-alt"></i>
                <span>Calendar</span>
            </a>
            <a href="#" class="nav-link" data-page="customers">
                <i class="fas fa-users"></i>
                <span>Customers</span>
            </a>
            <a href="#" class="nav-link" data-page="reports">
                <i class="fas fa-chart-bar"></i>
                <span>Reports</span>
            </a>
            <a href="bill.html" class="nav-link">
                <i class="fas fa-file-invoice"></i>
                <span>Generate Bill</span>
            </a>
            <a href="#" class="nav-link" data-page="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </div>
        
        <div class="user-info">
            <div class="user-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="user-details">
                <h4>Ram</h4>
                <p>Milk Delivery</p>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <button class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 id="page-title">Dashboard</h1>
            </div>
            <div class="header-right">
                <div class="date-display">
                    <i class="fas fa-calendar-day"></i>
                    <span id="current-date">Loading...</span>
                </div>
                <button class="add-delivery-btn" id="add-delivery-btn">
                    <i class="fas fa-plus"></i>
                    Add Delivery
                </button>
            </div>
        </header>

        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-wine-bottle"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Today's Milk</h3>
                        <p class="stat-value" id="today-milk">0 L</p>
                        <p class="stat-desc">Total delivered today</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Today's Income</h3>
                        <p class="stat-value" id="today-income">₹0</p>
                        <p class="stat-desc">From all customers</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-info">
                        <h3>This Month</h3>
                        <p class="stat-value" id="month-milk">0 L</p>
                        <p class="stat-desc">Total milk delivered</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Monthly Income</h3>
                        <p class="stat-value" id="month-income">₹0</p>
                        <p class="stat-desc">Total earnings</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="actions-grid">
                    <button class="action-btn" id="quick-add-delivery">
                        <i class="fas fa-plus-circle"></i>
                        <span>Add Delivery</span>
                    </button>
                    <button class="action-btn" onclick="window.location.href='bill.html'">
                        <i class="fas fa-file-invoice"></i>
                        <span>Generate Bill</span>
                    </button>
                    <button class="action-btn" id="view-today">
                        <i class="fas fa-eye"></i>
                        <span>View Today</span>
                    </button>
                    <button class="action-btn" id="view-month">
                        <i class="fas fa-chart-pie"></i>
                        <span>Monthly Report</span>
                    </button>
                </div>
            </div>

            <!-- Recent Deliveries -->
            <div class="recent-deliveries">
                <div class="section-header">
                    <h2>Recent Deliveries</h2>
                    <a href="#" class="view-all" data-page="calendar">View All</a>
                </div>
                <div class="deliveries-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Total Milk</th>
                                <th>Total Income</th>
                                <th>Customers</th>
                            </tr>
                        </thead>
                        <tbody id="recent-deliveries-body">
                            <!-- Will be populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Calendar Page -->
        <section id="calendar" class="page">
            <div class="calendar-header">
                <h2>Delivery Calendar</h2>
                <div class="calendar-controls">
                    <button id="prev-month" class="calendar-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h3 id="current-month-year">January 2023</h3>
                    <button id="next-month" class="calendar-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <button id="today-calendar" class="calendar-btn today-btn">
                        <i class="fas fa-calendar-day"></i>
                        Today
                    </button>
                </div>
            </div>
            
            <div class="calendar-container">
                <div class="calendar-weekdays">
                    <div>Sun</div>
                    <div>Mon</div>
                    <div>Tue</div>
                    <div>Wed</div>
                    <div>Thu</div>
                    <div>Fri</div>
                    <div>Sat</div>
                </div>
                <div class="calendar-days" id="calendar-days">
                    <!-- Will be populated by JS -->
                </div>
            </div>
        </section>

        <!-- Customers Page -->
        <section id="customers" class="page">
            <div class="section-header">
                <h2>Customers</h2>
                <button class="add-customer-btn" id="add-customer-btn">
                    <i class="fas fa-plus"></i>
                    Add Customer
                </button>
            </div>
            
            <div class="customers-grid" id="customers-grid">
                <!-- Customers will be populated dynamically -->
                <div class="empty-state" id="empty-customers-state" style="grid-column: 1/-1; text-align: center; padding: 50px;">
                    <i class="fas fa-users" style="font-size: 60px; color: #cbd5e1; margin-bottom: 20px;"></i>
                    <h3>No Customers Added</h3>
                    <p>Add your first customer to start tracking deliveries</p>
                    <button class="btn-primary" id="add-first-customer" style="margin-top: 20px;">
                        <i class="fas fa-plus"></i> Add Customer
                    </button>
                </div>
            </div>
        </section>

        <!-- Reports Page -->
        <section id="reports" class="page">
            <h2>Monthly Report</h2>
            <div class="report-controls">
                <select id="report-month" class="report-select">
                    <!-- Options will be populated by JS -->
                </select>
                <select id="report-year" class="report-select">
                    <!-- Options will be populated by JS -->
                </select>
                <button id="generate-report" class="report-btn">
                    <i class="fas fa-chart-bar"></i>
                    Generate Report
                </button>
                <button id="print-report" class="report-btn">
                    <i class="fas fa-print"></i>
                    Print Report
                </button>
            </div>
            
            <div class="report-summary">
                <div class="report-card">
                    <h3>Total Milk Delivered</h3>
                    <p class="report-value" id="report-total-milk">0 L</p>
                </div>
                <div class="report-card">
                    <h3>Total Income</h3>
                    <p class="report-value" id="report-total-income">₹0</p>
                </div>
                <div class="report-card">
                    <h3>Delivery Days</h3>
                    <p class="report-value" id="report-days">0</p>
                </div>
                <div class="report-card">
                    <h3>Average Daily</h3>
                    <p class="report-value" id="report-average">0 L</p>
                </div>
            </div>
            
            <div class="report-details">
                <h3>Daily Breakdown</h3>
                <div class="report-table-container">
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <!-- Customer columns will be added dynamically -->
                                <th>Total Milk</th>
                                <th>Income</th>
                            </tr>
                        </thead>
                        <tbody id="report-table-body">
                            <!-- Will be populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Settings Page -->
        <section id="settings" class="page">
            <h2>Settings</h2>
            <div class="settings-container">
                <div class="settings-card">
                    <h3><i class="fas fa-cog"></i> Application Settings</h3>
                    
                    <div class="setting-item">
                        <label for="default-milk-price">Default Milk Price per Liter (₹)</label>
                        <input type="number" id="default-milk-price" value="60" min="1" step="1">
                        <p class="setting-description">This price will be used for new customers</p>
                    </div>
                    
                    <button id="save-settings" class="settings-save-btn">
                        <i class="fas fa-save"></i>
                        Save Settings
                    </button>
                </div>
                
                <div class="settings-card">
                    <h3><i class="fas fa-database"></i> Data Management</h3>
                    
                    <div class="data-actions">
                        <button id="export-data" class="data-btn">
                            <i class="fas fa-download"></i>
                            Export Data
                        </button>
                        <button id="import-data" class="data-btn">
                            <i class="fas fa-upload"></i>
                            Import Data
                        </button>
                        <button id="clear-data" class="data-btn danger">
                            <i class="fas fa-trash"></i>
                            Clear All Data
                        </button>
                    </div>
                    
                    <div class="data-info">
                        <p><strong>Storage Status:</strong> <span id="storage-status">Loading...</span></p>
                        <p><strong>Total Customers:</strong> <span id="total-customers">0</span></p>
                        <p><strong>Total Deliveries:</strong> <span id="total-entries">0</span></p>
                        <p><strong>Last Backup:</strong> <span id="last-backup">Never</span></p>
                    </div>
                    
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                </div>
            </div>
        </section>
    </main>

    <!-- Add/Edit Delivery Modal -->
    <div class="modal" id="delivery-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Add Delivery</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="delivery-form">
                    <div class="form-group">
                        <label for="delivery-date">Date</label>
                        <input type="date" id="delivery-date" required>
                    </div>
                    
                    <div id="delivery-customers-container">
                        <!-- Customer inputs will be added here dynamically -->
                    </div>
                    
                    <div class="form-group">
                        <label for="delivery-notes">Notes (Optional)</label>
                        <textarea id="delivery-notes" rows="3" placeholder="Any special notes for this delivery"></textarea>
                    </div>
                    
                    <div class="form-summary">
                        <div class="summary-item">
                            <span>Total Milk:</span>
                            <span id="form-total-milk">0 L</span>
                        </div>
                        <div class="summary-item">
                            <span>Total Income:</span>
                            <span id="form-total-income">₹0</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary close-modal">Cancel</button>
                        <button type="submit" class="btn-primary">Save Delivery</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit Customer Modal -->
    <div class="modal" id="customer-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="customer-modal-title">Add Customer</h3>
                <button class="close-customer-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="customer-form">
                    <input type="hidden" id="customer-id">
                    
                    <div class="form-group">
                        <label for="customer-name">Customer Name *</label>
                        <input type="text" id="customer-name" placeholder="Enter customer name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customer-address">Address (Optional)</label>
                        <textarea id="customer-address" rows="2" placeholder="Enter customer address"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="customer-phone">Phone Number (Optional)</label>
                        <input type="tel" id="customer-phone" placeholder="Enter phone number">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customer-milk-price">Milk Price per Liter (₹) *</label>
                            <input type="number" id="customer-milk-price" min="1" step="0.1" value="60" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="customer-delivery-time">Delivery Time *</label>
                            <select id="customer-delivery-time" required>
                                <option value="Morning">Morning</option>
                                <option value="Evening">Evening</option>
                                <option value="Both">Both (Morning & Evening)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customer-default-liters">Default Daily Liters *</label>
                            <input type="number" id="customer-default-liters" min="0" step="0.1" value="1" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="customer-status">Status</label>
                            <select id="customer-status">
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary close-customer-modal">Cancel</button>
                        <button type="submit" class="btn-primary" id="customer-save-btn">Save Customer</button>
                        <button type="button" class="btn-danger" id="customer-delete-btn" style="display: none;">Delete Customer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <span id="notification-text">Delivery saved successfully!</span>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Confirm Action</h3>
                <button class="close-confirm">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Are you sure you want to proceed?</p>
                <div class="form-actions">
                    <button type="button" class="btn-secondary close-confirm">Cancel</button>
                    <button type="button" class="btn-danger" id="confirm-action">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>